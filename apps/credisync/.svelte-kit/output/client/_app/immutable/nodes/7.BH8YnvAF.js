const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BFDErIkF.js","../chunks/CanLVora.js","../chunks/DeuNT0YN.js"])))=>i.map(i=>d[i]);
import{_ as pt}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{D as Oa,p as Sa,P as Ve,o as za,y as Xe,z as Ae,c as T,a as p,b as Ta,f as h,h as t,r as a,s,X as mt,t as q,Y as ft,l as r,E as j,F as ae,L as Ia,g as e,j as u,J as Ze,H as ce,I as ht,k as Aa,W as Ga,K as ve,d as Ea,Z as gt,B as Ba,A as xt,_ as bt}from"../chunks/C5jdwYbG.js";import{g as Ha}from"../chunks/Dj_5MnEQ.js";import{p as Ct}from"../chunks/Dx07nh2P.js";import{s as Dt}from"../chunks/DhBo1QyW.js";import{f as w,c as Wa,a as ya}from"../chunks/Be5qoVR8.js";import"../chunks/CanLVora.js";import{a as qt}from"../chunks/NwYeZyG2.js";import{u as jt}from"../chunks/Bfzz_jm3.js";async function At(H){try{console.log("üí≥ [CREDITO] Creando cr√©dito..."),console.log("üí≥ [CREDITO] Datos:",H);const x={id:crypto.randomUUID(),...H,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),saldo_pendiente:H.total_a_pagar,cuotas_pagadas:0,dias_atraso:0};return console.log("‚úÖ [CREDITO] Cr√©dito creado (simulado):",x.id),await new Promise(P=>setTimeout(P,1e3)),x}catch(x){throw console.error("‚ùå [CREDITO] Error creando cr√©dito:",x),x}}var Et=h('<div class="modal-backdrop svelte-ta60gp"><div class="modal-content svelte-ta60gp"><div class="modal-header svelte-ta60gp"><h2 class="svelte-ta60gp"> </h2> <button class="btn-close svelte-ta60gp">‚úï</button></div> <div class="modal-body svelte-ta60gp"><!></div></div></div>');function It(H,x){Sa(x,!0);let P=Ve(x,"open",15,!1),de=Ve(x,"title",3,""),X=Ve(x,"maxWidth",3,"90%");function o(_){_.target===_.currentTarget&&P(!1)}function A(_){_.key==="Escape"&&P(!1)}za(()=>(document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)));var n=Xe(),E=Ae(n);{var L=_=>{var R=Et();R.__click=o;var W=t(R),I=t(W),z=t(I),Z=t(z,!0);a(z);var ee=s(z,2);ee.__click=()=>P(!1),a(I);var i=s(I,2),Ee=t(i);mt(Ee,()=>x.children),a(i),a(W),a(R),q(()=>{ft(W,`max-width: ${X()??""}`),r(Z,de())}),p(_,R)};T(E,_=>{P()&&_(L)})}p(H,n),Ta()}Oa(["click"]);var yt=h("<option> </option>"),Ot=h('<span class="error-message svelte-sex0pj"> </span>'),St=h('<tr class="svelte-sex0pj"><td class="svelte-sex0pj"> </td><td class="svelte-sex0pj"> </td><td class="svelte-sex0pj"> </td></tr>'),Tt=h('<div class="tabla-cuotas svelte-sex0pj"><table class="svelte-sex0pj"><thead class="svelte-sex0pj"><tr><th class="svelte-sex0pj">#</th><th class="svelte-sex0pj">Fecha</th><th class="svelte-sex0pj">Monto</th></tr></thead><tbody class="svelte-sex0pj"></tbody></table></div>'),Pt=h('<div class="resumen svelte-sex0pj"><h3 class="svelte-sex0pj">Resumen del Cr√©dito</h3> <div class="resumen-grid svelte-sex0pj"><div class="resumen-item svelte-sex0pj"><span class="resumen-label svelte-sex0pj">Monto Original</span> <span class="resumen-value svelte-sex0pj"> </span></div> <div class="resumen-item svelte-sex0pj"><span class="resumen-label svelte-sex0pj"> </span> <span class="resumen-value svelte-sex0pj"> </span></div> <div class="resumen-item highlight svelte-sex0pj"><span class="resumen-label svelte-sex0pj">Total a Pagar</span> <span class="resumen-value svelte-sex0pj"> </span></div> <div class="resumen-item highlight svelte-sex0pj"><span class="resumen-label svelte-sex0pj">Valor Cuota</span> <span class="resumen-value svelte-sex0pj"> </span></div></div> <button type="button" class="btn-ver-cuotas svelte-sex0pj"> </button> <!></div>'),$t=h('<div class="producto-info svelte-sex0pj"><div class="info-item svelte-sex0pj"><span class="info-label svelte-sex0pj">Inter√©s:</span> <span class="info-value svelte-sex0pj"> </span></div> <div class="info-item svelte-sex0pj"><span class="info-label svelte-sex0pj">Rango:</span> <span class="info-value svelte-sex0pj"> </span></div></div> <div class="form-group svelte-sex0pj"><label for="monto" class="svelte-sex0pj">Monto a Prestar</label> <input id="monto" type="number" inputmode="decimal" placeholder="Ingrese el monto" step="100"/> <!></div> <div class="form-row svelte-sex0pj"><div class="form-group svelte-sex0pj"><label for="fecha-desembolso" class="svelte-sex0pj">Fecha Desembolso</label> <input id="fecha-desembolso" type="date" class="svelte-sex0pj"/></div> <div class="form-group svelte-sex0pj"><label for="fecha-primera-cuota" class="svelte-sex0pj">Primera Cuota</label> <input id="fecha-primera-cuota" type="date" class="svelte-sex0pj"/></div></div> <!>',1),wt=h('<div class="form-container svelte-sex0pj"><div class="form-group svelte-sex0pj"><label for="producto" class="svelte-sex0pj">Producto de Cr√©dito</label> <select id="producto" class="svelte-sex0pj"><option>Seleccione un producto...</option><!></select></div> <!> <div class="form-actions svelte-sex0pj"><button type="button" class="btn-cancelar svelte-sex0pj">Cancelar</button> <button type="button" class="btn-guardar svelte-sex0pj"> </button></div></div>');function Lt(H,x){Sa(x,!0);let P=Ve(x,"open",15,!1),de=Ve(x,"onSuccess",3,()=>{}),X=j(ae([])),o=j(null),A=j(""),n=j(ae(new Date().toISOString().split("T")[0])),E=j(ae(new Date().toISOString().split("T")[0])),L=j(!1),_=j(!1),R=j(!1);Ia(()=>{P()&&!e(R)&&(u(R,!0),W(),I())});async function W(){try{u(X,await qt(),!0),console.log("üì¶ [MODAL] Productos cargados:",e(X).length)}catch(v){console.error("Error cargando productos:",v)}}function I(){u(o,null),u(A,"");const v=new Date().toISOString().split("T")[0];u(n,v,!0),u(E,z(v,null),!0),u(L,!1),u(_,!1)}function z(v,y,f=!1){if(!v)return new Date().toISOString().split("T")[0];const l=new Date(v+"T12:00:00"),M=l.getDay();if(!y)return l.setDate(l.getDate()+1),f&&l.getDay()===0&&l.setDate(l.getDate()+1),l.toISOString().split("T")[0];switch(y){case"DIARIO":f&&M===6?l.setDate(l.getDate()+2):l.setDate(l.getDate()+1);break;case"SEMANAL":const N=(7-l.getDay())%7||7;l.setDate(l.getDate()+N);break;case"QUINCENAL":l.setDate(l.getDate()+15);break;case"MENSUAL":l.setMonth(l.getMonth()+1);break}return f&&l.getDay()===0&&l.setDate(l.getDate()+1),l.toISOString().split("T")[0]}Ia(()=>{e(o)&&e(n)&&(console.log("üîÑ [MODAL] Actualizando fecha primera cuota:",{fechaDesembolso:e(n),frecuencia:e(o).frecuencia,excluir_domingos:e(o).excluir_domingos}),u(E,z(e(n),e(o).frecuencia,e(o).excluir_domingos||!1),!0),console.log("‚úÖ [MODAL] Fecha primera cuota calculada:",e(E)))});let Z=ce(()=>{if(!e(o)||!e(A))return null;const v=parseFloat(e(A));return isNaN(v)?!1:v>=e(o).monto_minimo&&v<=e(o).monto_maximo}),ee=ce(()=>{if(!e(o)||!e(A))return"";const v=parseFloat(e(A));return isNaN(v)?"Monto inv√°lido":v<e(o).monto_minimo?`M√≠nimo: ${w(e(o).monto_minimo)}`:v>e(o).monto_maximo?`M√°ximo: ${w(e(o).monto_maximo)}`:""}),i=ce(()=>{if(!e(o)||!e(Z))return null;const v=parseFloat(e(A)),y=parseFloat(e(o).interes_porcentaje),f=e(o).numero_cuotas,l=v*(1+y/100),M=l/f;return{montoOriginal:v,interesPorcentaje:y,numeroCuotas:f,totalAPagar:l,valorCuota:M,frecuencia:e(o).frecuencia}}),Ee=ce(()=>{if(!e(L)||!e(i))return[];const v=e(i).frecuencia==="DIARIO"&&e(o)?.excluir_domingos||!1,y={numero_cuotas:e(i).numeroCuotas,valor_cuota:e(i).valorCuota,frecuencia:e(i).frecuencia,fecha_primera_cuota:e(E),excluir_domingos:v};console.log("üîç [DEBUG] Calculando cuotas con:",{frecuencia:y.frecuencia,fecha_primera_cuota:y.fecha_primera_cuota,excluir_domingos:y.excluir_domingos,excluir_domingos_producto:e(o)?.excluir_domingos,producto:e(o)?.nombre});const f=Wa(y);return f.length>0&&(console.log("üìã [DEBUG] Primera cuota:",f[0].fecha_programada),f.length>1&&console.log("üìã [DEBUG] Segunda cuota:",f[1].fecha_programada)),f}),Ge=ce(()=>e(o)&&e(Z)&&e(n)&&e(E));async function ea(){if(!(!e(Ge)||e(_))){u(_,!0);try{const v=gt(jt),y=e(i).frecuencia==="DIARIO"&&e(o).excluir_domingos||!1,f=Wa({numero_cuotas:e(i).numeroCuotas,valor_cuota:e(i).valorCuota,frecuencia:e(i).frecuencia,excluir_domingos:y,fecha_primera_cuota:e(E)}),l=f[f.length-1].fecha_programada,M=e(i).frecuencia==="DIARIO"&&e(o).excluir_domingos||!1,N={cliente_id:x.cliente.id,producto_id:e(o).id,cobrador_id:v?.id,ruta_id:x.cliente.ruta_id,monto_solicitado:e(i).montoOriginal,monto_aprobado:e(i).montoOriginal,tasa_interes:e(i).interesPorcentaje,total_a_pagar:e(i).totalAPagar,numero_cuotas:e(i).numeroCuotas,valor_cuota:e(i).valorCuota,frecuencia:e(i).frecuencia,excluir_domingos:M,fecha_otorgamiento:Date.now(),fecha_vencimiento:new Date(l).getTime(),fecha_desembolso:e(n),fecha_primera_cuota:e(E),fecha_ultima_cuota:l,estado:"ACTIVO"};console.log("üéØ [MODAL] Creando cr√©dito:",N),await At(N),console.log("‚úÖ [MODAL] Cr√©dito creado exitosamente"),P(!1),de()()}catch(v){console.error("‚ùå [MODAL] Error al otorgar cr√©dito:",v)}finally{u(_,!1)}}}It(H,{title:"Otorgar Cr√©dito",maxWidth:"600px",get open(){return P()},set open(v){P(v)},children:(v,y)=>{var f=wt(),l=t(f),M=s(t(l),2),N=t(M);N.value=(N.__value=null)??"";var aa=s(N);Ze(aa,17,()=>e(X),O=>O.id,(O,b)=>{var g=yt(),$=t(g);a(g);var U={};q(()=>{r($,`${e(b).nombre??""} - ${e(b).numero_cuotas??""} cuotas ${e(b).frecuencia??""}`),U!==(U=e(b))&&(g.value=(g.__value=e(b))??"")}),p(O,g)}),a(M),a(l);var Be=s(l,2);{var ta=O=>{var b=$t(),g=Ae(b),$=t(g),U=s(t($),2),He=t(U);a(U),a($);var We=s($,2),ue=s(t(We),2),Ie=t(ue);a(ue),a(We),a(g);var ye=s(g,2),V=s(t(ye),2);Aa(V);let _e;var sa=s(V,2);{var Oe=D=>{var G=Ot(),se=t(G,!0);a(G),q(()=>r(se,e(ee))),p(D,G)};T(sa,D=>{e(ee)&&D(Oe)})}a(ye);var Se=s(ye,2),Te=t(Se),Pe=s(t(Te),2);Aa(Pe),a(Te);var pe=s(Te,2),te=s(t(pe),2);Aa(te),a(pe),a(Se);var ra=s(Se,2);{var oa=D=>{var G=Pt(),se=s(t(G),2),re=t(se),me=s(t(re),2),$e=t(me,!0);a(me),a(re);var fe=s(re,2),we=t(fe),ze=t(we);a(we);var Le=s(we,2),la=t(Le,!0);a(Le),a(fe);var he=s(fe,2),ge=s(t(he),2),xe=t(ge,!0);a(ge),a(he);var Ke=s(he,2),Ye=s(t(Ke),2),na=t(Ye,!0);a(Ye),a(Ke),a(se);var oe=s(se,2);oe.__click=()=>u(L,!e(L));var ke=t(oe);a(oe);var ia=s(oe,2);{var Me=Y=>{var le=Tt(),be=t(le),Ce=s(t(be));Ze(Ce,21,()=>e(Ee),Re=>Re.numero,(Re,De)=>{var qe=St(),Ne=t(qe),va=t(Ne,!0);a(Ne);var d=s(Ne),m=t(d,!0);a(d);var S=s(d),J=t(S,!0);a(S),a(qe),q((C,je)=>{r(va,e(De).numero),r(m,C),r(J,je)},[()=>ya(e(De).fecha_programada),()=>w(e(De).monto_programado)]),p(Re,qe)}),a(Ce),a(be),a(le),p(Y,le)};T(ia,Y=>{e(L)&&Y(Me)})}a(G),q((Y,le,be,Ce)=>{r($e,Y),r(ze,`Inter√©s (${e(i).interesPorcentaje??""}%)`),r(la,le),r(xe,be),r(na,Ce),r(ke,`${e(L)?"‚ñº":"‚ñ∂"} Ver Tabla de Cuotas (${e(i).numeroCuotas??""})`)},[()=>w(e(i).montoOriginal),()=>w(e(i).totalAPagar-e(i).montoOriginal),()=>w(e(i).totalAPagar),()=>w(e(i).valorCuota)]),p(D,G)};T(ra,D=>{e(i)&&D(oa)})}q((D,G)=>{r(He,`${e(o).interes_porcentaje??""}%`),r(Ie,`${D??""} - 
						${G??""}`),Ga(V,"min",e(o).monto_minimo),Ga(V,"max",e(o).monto_maximo),V.disabled=e(_),_e=ve(V,1,"svelte-sex0pj",null,_e,{error:e(ee)}),Pe.disabled=e(_),te.disabled=e(_)},[()=>w(e(o).monto_minimo),()=>w(e(o).monto_maximo)]),Ea(V,()=>e(A),D=>u(A,D)),Ea(Pe,()=>e(n),D=>u(n,D)),Ea(te,()=>e(E),D=>u(E,D)),p(O,b)};T(Be,O=>{e(o)&&O(ta)})}var c=s(Be,2),k=t(c);k.__click=()=>P(!1);var F=s(k,2);F.__click=ea;var K=t(F,!0);a(F),a(c),a(f),q(()=>{M.disabled=e(_),k.disabled=e(_),F.disabled=!e(Ge)||e(_),r(K,e(_)?"Guardando...":"Otorgar Cr√©dito")}),ht(M,()=>e(o),O=>u(o,O)),p(v,f)},$$slots:{default:!0}}),Ta()}Oa(["click"]);var kt=h('<div class="loading-container svelte-q8hs85"><div class="text-center"><div class="inline-block w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4"></div> <p class="text-gray-600">Cargando...</p></div></div>'),Mt=h("<span> </span>"),Rt=h("<span> </span>"),Nt=h('<div class="cliente-referencia svelte-q8hs85"><span> </span></div>'),Ft=h('<span class="dias-atraso svelte-q8hs85"> </span>'),Ut=h('<p class="empty-state svelte-q8hs85">No hay cr√©ditos activos</p>'),Vt=h('<div class="credito-alerta svelte-q8hs85"> </div>'),Gt=h('<span class="dias-atraso-cuota svelte-q8hs85"> </span>'),Bt=h('<tr><td class="svelte-q8hs85"> </td><td class="svelte-q8hs85"> </td><td class="svelte-q8hs85"> </td><td class="svelte-q8hs85"> </td><td class="svelte-q8hs85"><span> <!></span></td></tr>'),Ht=h('<div class="cuotas-expandidas svelte-q8hs85"><div class="cuotas-header svelte-q8hs85"><h4 class="svelte-q8hs85">Detalle de Cuotas</h4></div> <div class="cuotas-tabla svelte-q8hs85"><table class="svelte-q8hs85"><thead class="svelte-q8hs85"><tr><th class="svelte-q8hs85">#</th><th class="svelte-q8hs85">Fecha</th><th class="svelte-q8hs85">Monto</th><th class="svelte-q8hs85">Pagado</th><th class="svelte-q8hs85">Estado</th></tr></thead><tbody class="svelte-q8hs85"></tbody></table></div></div>'),Wt=h('<div><div class="credito-header svelte-q8hs85"><span class="credito-monto svelte-q8hs85"> </span> <span> </span></div> <div class="credito-info svelte-q8hs85"><span> </span></div> <div class="credito-detalles svelte-q8hs85"><div class="detalle-item svelte-q8hs85"><span class="detalle-label svelte-q8hs85">Saldo</span> <span class="detalle-value svelte-q8hs85"> </span></div> <div class="detalle-item svelte-q8hs85"><span class="detalle-label svelte-q8hs85">Pagadas</span> <span class="detalle-value svelte-q8hs85"> </span></div> <div class="detalle-item svelte-q8hs85"><span class="detalle-label svelte-q8hs85">Desembolso</span> <span class="detalle-value svelte-q8hs85"> </span></div></div> <!> <div class="credito-acciones svelte-q8hs85"><button class="btn-secundario svelte-q8hs85"> </button> <button class="btn-primario svelte-q8hs85">Registrar Pago</button></div> <!></div>'),zt=h('<div class="detalle-page svelte-q8hs85"><div class="header svelte-q8hs85"><button class="btn-back svelte-q8hs85">‚Üê Volver</button> <button class="btn-otorgar svelte-q8hs85">+ Otorgar Cr√©dito</button></div> <div class="cliente-header svelte-q8hs85"><h1 class="svelte-q8hs85"> </h1> <div class="cliente-contacto svelte-q8hs85"><span> </span> <span> </span> <!></div> <div class="cliente-direccion svelte-q8hs85"><span> </span> <!></div> <!></div> <div class="estado-financiero svelte-q8hs85"><h2 class="svelte-q8hs85">ESTADO FINANCIERO</h2> <div class="estado-grid svelte-q8hs85"><div class="estado-item svelte-q8hs85"><span class="estado-label svelte-q8hs85">Cr√©ditos Activos</span> <span class="estado-value svelte-q8hs85"> </span></div> <div class="estado-item svelte-q8hs85"><span class="estado-label svelte-q8hs85">Saldo Total</span> <span class="estado-value svelte-q8hs85"> </span></div></div> <div class="estado-grid svelte-q8hs85"><div class="estado-item svelte-q8hs85"><span class="estado-label svelte-q8hs85">Estado</span> <span> </span> <!></div> <div class="estado-item svelte-q8hs85"><span class="estado-label svelte-q8hs85">Score</span> <span> </span></div></div></div> <div class="creditos-section svelte-q8hs85"><h2 class="svelte-q8hs85"> </h2> <!></div> <div class="acciones-inferiores svelte-q8hs85"><button class="btn-accion svelte-q8hs85">Editar Cliente</button> <button class="btn-accion svelte-q8hs85">Ver Historial</button></div></div> <!>',1),Kt=h('<div class="error-container svelte-q8hs85"><p>Cliente no encontrado</p> <button class="btn-primario svelte-q8hs85">Volver</button></div>');function os(H,x){Sa(x,!0);const P=()=>Ba(Ct,"$page",X),de=()=>Ba(Dt,"$syncCounter",X),[X,o]=xt(),A=ce(()=>P().params.id);let n=j(null),E=j(ae([])),L=j(!0),_=j(null),R=j(!1);ae([]),ae([]);let W=j(ae([])),I=j(ae({totalCreditos:0,saldoTotal:0,estado:"SIN_CREDITOS",diasAtraso:0,score:"REGULAR"})),z=j(0);Ia(()=>{de()!==e(z)&&!e(L)&&e(n)&&(u(z,de(),!0),Z())}),za(async()=>{await Z()});async function Z(){try{u(L,!0),console.log("üë§ [DETALLE-CLIENTE] Cargando cliente:",e(A));const{getClienteById:c}=await pt(async()=>{const{getClienteById:k}=await import("../chunks/BFDErIkF.js").then(F=>F.a);return{getClienteById:k}},__vite__mapDeps([0,1,2]),import.meta.url);if(u(n,await c(e(A)),!0),!e(n)){console.log("‚ùå [DETALLE-CLIENTE] Cliente no encontrado:",e(A)),Ha("/clientes");return}console.log("‚úÖ [DETALLE-CLIENTE] Cliente cargado:",e(n).nombre),u(E,[],!0),u(W,e(E),!0),u(I,{totalCreditos:e(n).creditos_activos||0,saldoTotal:e(n).saldo_total||0,estado:e(n).estado||"SIN_CREDITOS",diasAtraso:e(n).dias_atraso_max||0,score:e(n).score||"REGULAR"},!0)}catch(c){console.error("Error cargando datos:",c)}finally{u(L,!1)}}function ee(){Ha("/clientes")}function i(){u(R,!0)}function Ee(){Z()}async function Ge(){alert("Funcionalidad de registrar pago pendiente para pr√≥ximas fases")}function ea(c){u(_,e(_)===c?null:c,!0)}function v(){alert("Funcionalidad de edici√≥n pendiente para pr√≥ximas fases")}function y(){alert("Historial completo pr√≥ximamente")}function f(c){switch(c){case"PAGADA":return"üü¢";case"PARCIAL":return"üü°";case"PENDIENTE":return"‚ö™";default:return"‚ö™"}}function l(c){return c.estado==="PAGADA"?"pagada":c.dias_atraso>0?"atrasada":c.estado==="PARCIAL"?"parcial":"pendiente"}function M(c){const k=[],F=c.total_a_pagar/c.numero_cuotas;for(let K=1;K<=c.numero_cuotas;K++){const O=new Date(c.fecha_desembolso);O.setDate(O.getDate()+K*(c.frecuencia==="DIARIO"?1:c.frecuencia==="SEMANAL"?7:15));const b=K<=c.cuotas_pagadas,g=O.toISOString().split("T")[0],$=new Date().toISOString().split("T")[0],U=!b&&g<$?Math.floor((new Date($)-new Date(g))/(1e3*60*60*24)):0;k.push({numero:K,fecha_programada:g,monto_programado:F,monto_pagado:b?F:0,estado:b?"PAGADA":"PENDIENTE",dias_atraso:U})}return k}var N=Xe(),aa=Ae(N);{var Be=c=>{var k=kt();p(c,k)},ta=c=>{var k=Xe(),F=Ae(k);{var K=b=>{var g=zt(),$=Ae(g),U=t($),He=t(U);He.__click=ee;var We=s(He,2);We.__click=i,a(U);var ue=s(U,2),Ie=t(ue),ye=t(Ie,!0);a(Ie);var V=s(Ie,2),_e=t(V),sa=t(_e);a(_e);var Oe=s(_e,2),Se=t(Oe);a(Oe);var Te=s(Oe,2);{var Pe=d=>{var m=Mt(),S=t(m);a(m),q(()=>r(S,`üìû ${e(n).telefono_2??""}`)),p(d,m)};T(Te,d=>{e(n).telefono_2&&d(Pe)})}a(V);var pe=s(V,2),te=t(pe),ra=t(te);a(te);var oa=s(te,2);{var D=d=>{var m=Rt(),S=t(m);a(m),q(()=>r(S,`, ${e(n).barrio??""}`)),p(d,m)};T(oa,d=>{e(n).barrio&&d(D)})}a(pe);var G=s(pe,2);{var se=d=>{var m=Nt(),S=t(m),J=t(S);a(S),a(m),q(()=>r(J,`Ref: ${e(n).referencia??""}`)),p(d,m)};T(G,d=>{e(n).referencia&&d(se)})}a(ue);var re=s(ue,2),me=s(t(re),2),$e=t(me),fe=s(t($e),2),we=t(fe,!0);a(fe),a($e);var ze=s($e,2),Le=s(t(ze),2),la=t(Le,!0);a(Le),a(ze),a(me);var he=s(me,2),ge=t(he),xe=s(t(ge),2),Ke=t(xe,!0);a(xe);var Ye=s(xe,2);{var na=d=>{var m=Ft(),S=t(m);a(m),q(()=>r(S,`‚ö†Ô∏è ${e(I).diasAtraso??""} d√≠as de atraso`)),p(d,m)};T(Ye,d=>{e(I).diasAtraso>0&&d(na)})}a(ge);var oe=s(ge,2),ke=s(t(oe),2),ia=t(ke,!0);a(ke),a(oe),a(he),a(re);var Me=s(re,2),Y=t(Me),le=t(Y);a(Y);var be=s(Y,2);{var Ce=d=>{var m=Ut();p(d,m)},Re=d=>{var m=Xe(),S=Ae(m);Ze(S,17,()=>e(W),J=>J.id,(J,C)=>{var je=Wt(),ca=t(je),da=t(ca),Ka=t(da,!0);a(da);var ua=s(da,2),Ya=t(ua,!0);a(ua),a(ca);var _a=s(ca,2),Pa=t(_a),Ja=t(Pa);a(Pa),a(_a);var pa=s(_a,2),ma=t(pa),$a=s(t(ma),2),Qa=t($a,!0);a($a),a(ma);var fa=s(ma,2),wa=s(t(fa),2),Xa=t(wa);a(wa),a(fa);var La=s(fa,2),ka=s(t(La),2),Za=t(ka,!0);a(ka),a(La),a(pa);var Ma=s(pa,2);{var et=Q=>{var ne=Vt(),ie=t(ne);a(ne),q(()=>r(ie,`‚ö†Ô∏è ${e(C).dias_atraso??""} d√≠as de atraso`)),p(Q,ne)};T(Ma,Q=>{e(C).dias_atraso>0&&Q(et)})}var ha=s(Ma,2),Je=t(ha);Je.__click=()=>ea(e(C).id);var at=t(Je);a(Je);var tt=s(Je,2);tt.__click=Ge,a(ha);var st=s(ha,2);{var rt=Q=>{const ne=ce(()=>M(e(C)));var ie=Ht(),Ra=s(t(ie),2),Na=t(Ra),Fa=s(t(Na));Ze(Fa,21,()=>e(ne),ga=>ga.numero,(ga,B)=>{var Qe=Bt(),xa=t(Qe),ot=t(xa,!0);a(xa);var ba=s(xa),lt=t(ba,!0);a(ba);var Ca=s(ba),nt=t(Ca,!0);a(Ca);var Da=s(Ca),it=t(Da,!0);a(Da);var Ua=s(Da),qa=t(Ua),Va=t(qa),vt=s(Va);{var ct=Fe=>{var Ue=Gt(),ja=t(Ue);a(Ue),q(()=>r(ja,`(${e(B).dias_atraso??""}d)`)),p(Fe,Ue)};T(vt,Fe=>{e(B).dias_atraso>0&&Fe(ct)})}a(qa),a(Ua),a(Qe),q((Fe,Ue,ja,dt,ut,_t)=>{ve(Qe,1,Fe,"svelte-q8hs85"),r(ot,e(B).numero),r(lt,Ue),r(nt,ja),r(it,dt),ve(qa,1,`estado-cuota ${ut??""}`,"svelte-q8hs85"),r(Va,`${_t??""} ${e(B).estado??""} `)},[()=>bt(l(e(B))),()=>ya(e(B).fecha_programada),()=>w(e(B).monto_programado),()=>w(e(B).monto_pagado),()=>l(e(B)),()=>f(e(B).estado)]),p(ga,Qe)}),a(Fa),a(Na),a(Ra),a(ie),p(Q,ie)};T(st,Q=>{e(_)===e(C).id&&Q(rt)})}a(je),q((Q,ne,ie)=>{ve(je,1,`credito-card ${e(C).dias_atraso>0?"mora":"al_dia"}`,"svelte-q8hs85"),r(Ka,Q),ve(ua,1,`credito-estado ${e(C).dias_atraso>0?"mora":"al_dia"}`,"svelte-q8hs85"),r(Ya,e(C).dias_atraso>0?"üî¥ MORA":"üü¢ AL D√çA"),r(Ja,`${e(C).frecuencia??""} ‚Ä¢ ${e(C).numero_cuotas??""} cuotas`),r(Qa,ne),r(Xa,`${e(C).cuotas_pagadas??""}/${e(C).numero_cuotas??""}`),r(Za,ie),r(at,`${e(_)===e(C).id?"‚ñº":"‚ñ∂"} Ver Cuotas`)},[()=>w(e(C).total_a_pagar),()=>w(e(C).saldo_pendiente),()=>ya(e(C).fecha_desembolso)]),p(J,je)}),p(d,m)};T(be,d=>{e(W).length===0?d(Ce):d(Re,!1)})}a(Me);var De=s(Me,2),qe=t(De);qe.__click=v;var Ne=s(qe,2);Ne.__click=y,a(De),a($);var va=s($,2);Lt(va,{get cliente(){return e(n)},onSuccess:Ee,get open(){return e(R)},set open(d){u(R,d,!0)}}),q((d,m,S,J)=>{r(ye,e(n).nombre),r(sa,`üìÑ ${e(n).tipo_documento??""}: ${e(n).numero_documento??""}`),r(Se,`üìû ${e(n).telefono??""}`),r(ra,`üìç ${e(n).direccion??""}`),r(we,e(I).totalCreditos),r(la,d),ve(xe,1,`estado-badge ${m??""}`,"svelte-q8hs85"),r(Ke,S),ve(ke,1,`score-badge ${J??""}`,"svelte-q8hs85"),r(ia,e(I).score),r(le,`CR√âDITOS ACTIVOS (${e(E).length??""})`)},[()=>w(e(I).saldoTotal),()=>e(I).estado.toLowerCase().replace("_","-"),()=>e(I).estado.replace("_"," "),()=>e(I).score.toLowerCase()]),p(b,g)},O=b=>{var g=Kt(),$=s(t(g),2);$.__click=ee,a(g),p(b,g)};T(F,b=>{e(n)?b(K):b(O,!1)},!0)}p(c,k)};T(aa,c=>{e(L)?c(Be):c(ta,!1)})}p(H,N),Ta(),o()}Oa(["click"]);export{os as component};
