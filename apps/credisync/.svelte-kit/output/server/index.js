import{B as re,r as Jt,w as Ge}from"./chunks/vendor.js";import{json as G,text as N,error as Ee}from"@sveltejs/kit";import{HttpError as ae,SvelteKitError as I,Redirect as B,ActionFailure as ve}from"@sveltejs/kit/internal";import{with_request_store as U,merge_tracing as ce}from"@sveltejs/kit/internal/server";import{a as J,b as z,c as oe,r as Xt,o as Kt,d as Je}from"./chunks/environment.js";import{B as Yt,c as Qt,p as ye,s as ue,d as _t,T as Xe,I as Ke}from"./chunks/shared.js";import*as L from"devalue";import{m as Zt,d as mt,a as yt,v as er,b as tr,c as rr,e as nr,n as Ue,r as Ye,f as sr}from"./chunks/exports.js";import{b as Qe,t as ar,a as he,g as or}from"./chunks/utils2.js";import{p as Ae,r as Ze,o as ir,s as cr,a as lr,g as ur,b as dr}from"./chunks/internal.js";function gt(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),resolve:e,reject:t}}const fr=[101,103,204,205,304],pr=!!globalThis.process?.versions?.webcontainer,hr="/_svelte_kit_assets",wt=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],_r=["GET","POST","HEAD"];function He(e,t){const r=[];e.split(",").forEach((o,i)=>{const l=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(o);if(l){const[,a,d,c="1"]=l;r.push({type:a,subtype:d,q:+c,i})}}),r.sort((o,i)=>o.q!==i.q?i.q-o.q:o.subtype==="*"!=(i.subtype==="*")?o.subtype==="*"?1:-1:o.type==="*"!=(i.type==="*")?o.type==="*"?1:-1:o.i-i.i);let n,s=1/0;for(const o of t){const[i,l]=o.split("/"),a=r.findIndex(d=>(d.type===i||d.type==="*")&&(d.subtype===l||d.subtype==="*"));a!==-1&&a<s&&(n=o,s=a)}return n}function mr(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}function Le(e){return mr(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain",Yt)}function yr(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function ie(e){return e instanceof ae||e instanceof I?e.status:500}function gr(e){return e instanceof I?e.text:"Internal Error"}const bt={"&":"&amp;",'"':"&quot;"},kt={"&":"&amp;","<":"&lt;"},vt="[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]",wr=new RegExp(`[${Object.keys(bt).join("")}]|`+vt,"g"),br=new RegExp(`[${Object.keys(kt).join("")}]|`+vt,"g");function Ie(e,t){const r=t?bt:kt;return e.replace(t?wr:br,s=>s.length===2?s:r[s]??`&#${s.charCodeAt(0)};`)}function $t(e,t){return N(`${t} method not allowed`,{status:405,headers:{allow:kr(e).join(", ")}})}function kr(e){const t=wt.filter(r=>r in e);return"GET"in e&&!("HEAD"in e)&&t.push("HEAD"),t}function xt(e){return`__sveltekit_${e.version_hash}`}function we(e,t,r){let n=e.templates.error({status:t,message:Ie(r)});return N(n,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function et(e,t,r,n){n=n instanceof ae?n:yr(n);const s=ie(n),o=await D(e,t,r,n),i=He(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||i==="application/json"?G(o,{status:s}):we(r,s,o.message)}async function D(e,t,r,n){if(n instanceof ae)return{message:"Unknown Error",...n.body};const s=ie(n),o=gr(n);return await U({event:e,state:t},()=>r.hooks.handleError({error:n,event:e,status:s,message:o}))??{message:o}}function be(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function Et(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (${t.path}). If you need to serialize/deserialize custom types, use transport hooks: https://svelte.dev/docs/kit/hooks#Universal-hooks-transport.`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function St(e){const t={};return e.uses&&e.uses.dependencies.size>0&&(t.dependencies=Array.from(e.uses.dependencies)),e.uses&&e.uses.search_params.size>0&&(t.search_params=Array.from(e.uses.search_params)),e.uses&&e.uses.params.size>0&&(t.params=Array.from(e.uses.params)),e.uses?.parent&&(t.parent=1),e.uses?.route&&(t.route=1),e.uses?.url&&(t.url=1),t}function jt(e,t){return e._.prerendered_routes.has(t)||t.at(-1)==="/"&&e._.prerendered_routes.has(t.slice(0,-1))}function vr(e,t,r){const n=`
\x1B[1;31m[${e}] ${r.request.method} ${r.url.pathname}\x1B[0m`;return e===404?n:`${n}
${t.stack}`}function Rt(e){const r=e?.split("/")?.at(-1);return r?r.split(".").slice(0,-1).join("."):"unknown"}async function $r(e,t,r,n){const s=e.request.method;let o=r[s]||r.fallback;if(s==="HEAD"&&!r.HEAD&&r.GET&&(o=r.GET),!o)return $t(r,s);const i=r.prerender??n.prerender_default;if(i&&(r.POST||r.PATCH||r.PUT||r.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(n.prerendering&&!n.prerendering.inside_reroute&&!i){if(n.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}t.is_endpoint_request=!0;try{const l=await U({event:e,state:t},()=>o(e));if(!(l instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);if(n.prerendering&&(!n.prerendering.inside_reroute||i)){const a=new Response(l.clone().body,{status:l.status,statusText:l.statusText,headers:new Headers(l.headers)});if(a.headers.set("x-sveltekit-prerender",String(i)),n.prerendering.inside_reroute&&i)a.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),n.prerendering.dependencies.set(e.url.pathname,{response:a,body:null});else return a}return l}catch(l){if(l instanceof B)return new Response(void 0,{status:l.status,headers:{location:l.location}});throw l}}function xr(e){const{method:t,headers:r}=e.request;if(wt.includes(t)&&!_r.includes(t))return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const n=e.request.headers.get("accept")??"*/*";return He(n,["*","text/html"])!=="text/html"}function Ce(e){return e.filter(t=>t!=null)}const De="/__data.json",ke=".html__data.json";function Er(e){return e.endsWith(De)||e.endsWith(ke)}function Me(e){return e.endsWith(".html")?e.replace(/\.html$/,ke):e.replace(/\/$/,"")+De}function Sr(e){return e.endsWith(ke)?e.slice(0,-ke.length)+".html":e.slice(0,-De.length)}const We="/__route.js";function jr(e){return e.endsWith(We)}function Ot(e){return e.replace(/\/$/,"")+We}function Rr(e){return e.slice(0,-We.length)}const Or={spanContext(){return Tr},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this},addLink(){return this},addLinks(){return this}},Tr={traceId:"",spanId:"",traceFlags:0};async function ee({name:e,attributes:t,fn:r}){return r(Or)}function Tt(e){return He(e.request.headers.get("accept")??"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function Ar(e,t,r,n){const s=n?.actions;if(!s){const o=new I(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page");return de({type:"error",error:await D(e,t,r,o)},{status:o.status,headers:{allow:"GET"}})}Ct(s);try{const o=await qt(e,t,s);return o instanceof ve?de({type:"failure",status:o.status,data:tt(o.data,e.route.id,r.hooks.transport)}):de({type:"success",status:o?200:204,data:tt(o,e.route.id,r.hooks.transport)})}catch(o){const i=o;return i instanceof B?At(i):de({type:"error",error:await D(e,t,r,Fe(i))},{status:ie(i)})}}function Fe(e){return e instanceof ve?new Error('Cannot "throw fail()". Use "return fail()"'):e}function At(e){return de({type:"redirect",status:e.status,location:e.location})}function de(e,t){return G(e,t)}function Cr(e){return e.request.method==="POST"}async function qr(e,t,r){const n=r?.actions;if(!n)return e.setHeaders({allow:"GET"}),{type:"error",error:new I(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};Ct(n);try{const s=await qt(e,t,n);return s instanceof ve?{type:"failure",status:s.status,data:s.data}:{type:"success",status:200,data:s}}catch(s){const o=s;return o instanceof B?{type:"redirect",status:o.status,location:o.location}:{type:"error",error:Fe(o)}}}function Ct(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions")}async function qt(e,t,r){const n=new URL(e.request.url);let s="default";for(const i of n.searchParams)if(i[0].startsWith("/")){if(s=i[0].slice(1),s==="default")throw new Error('Cannot use reserved action name "default"');break}const o=r[s];if(!o)throw new I(404,"Not Found",`No action with name '${s}' found`);if(!Le(e.request))throw new I(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return ee({name:"sveltekit.form_action",attributes:{"http.route":e.route.id||"unknown"},fn:async i=>{const l=ce(e,i),a=await U({event:l,state:t},()=>o(l));return a instanceof ve&&i.setAttributes({"sveltekit.form_action.result.type":"failure","sveltekit.form_action.result.status":a.status}),a}})}function Pr(e,t,r){const n=s=>{for(const o in r){const i=r[o].encode(s);if(i)return`app.decode('${o}', ${L.uneval(i,n)})`}};return Pt(e,s=>L.uneval(s,n),t)}function tt(e,t,r){const n=Object.fromEntries(Object.entries(r).map(([s,o])=>[s,o.encode]));return Pt(e,s=>L.stringify(s,n),t)}function Pt(e,t,r){try{return t(e)}catch(n){const s=n;if(e instanceof Response)throw new Error(`Data returned from action inside ${r} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: "invalid" });`);if("path"in s){let o=`Data returned from action inside ${r} is not serializable: ${s.message}`;throw s.path!==""&&(o+=` (data.${s.path})`),new Error(o)}throw s}}function Nt(){let e=-1,t=-1;const r=[];return{iterate:(n=s=>s)=>({[Symbol.asyncIterator](){return{next:async()=>{const s=r[++t];if(!s)return{value:null,done:!0};const o=await s.promise;return{value:n(o),done:!1}}}}}),add:n=>{r.push(gt()),n.then(s=>{r[++e].resolve(s)})}}}function fe(e,t,r){let n=1,s=-1;const o=Nt(),i=xt(r);function l(d){return function c(f){if(typeof f?.then=="function"){const _=n++,h=f.then(u=>({data:u})).catch(async u=>({error:await D(e,t,r,u)})).then(async({data:u,error:p})=>{let m;try{m=L.uneval(p?[,p]:[u],c)}catch{p=await D(e,t,r,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),u=void 0,m=L.uneval([,p],c)}return{index:d,str:`${i}.resolve(${_}, ${m.includes("app.decode")?`(app) => ${m}`:`() => ${m}`})`}});return o.add(h),`${i}.defer(${_})`}else for(const _ in r.hooks.transport){const h=r.hooks.transport[_].encode(f);if(h)return`app.decode('${_}', ${L.uneval(h,c)})`}}}const a=[];return{set_max_nodes(d){s=d},add_node(d,c){try{if(!c){a[d]="null";return}const f={type:"data",data:c.data,uses:St(c)};c.slash&&(f.slash=c.slash),a[d]=L.uneval(f,l(d))}catch(f){throw f.path=f.path.slice(1),new Error(Et(e,f))}},get_data(d){const c=`<script${d.script_needs_nonce?` nonce="${d.nonce}"`:""}>`,f=`<\/script>
`;return{data:`[${Ce(s>-1?a.slice(0,s):a).join(",")}]`,chunks:n>1?o.iterate(({index:_,str:h})=>s>-1&&_>=s?"":c+h+f):null}}}}function zt(e,t,r){let n=1;const s=Nt(),o={...Object.fromEntries(Object.entries(r.hooks.transport).map(([l,a])=>[l,a.encode])),Promise:l=>{if(typeof l?.then!="function")return;const a=n++;let d="data";const c=l.catch(async f=>(d="error",D(e,t,r,f))).then(async f=>{let _;try{_=L.stringify(f,o)}catch{const h=await D(e,t,r,new Error(`Failed to serialize promise while rendering ${e.route.id}`));d="error",_=L.stringify(h,o)}return`{"type":"chunk","id":${a},"${d}":${_}}
`});return s.add(c),a}},i=[];return{add_node(l,a){try{if(!a){i[l]="null";return}if(a.type==="error"||a.type==="skip"){i[l]=JSON.stringify(a);return}i[l]=`{"type":"data","data":${L.stringify(a.data,o)},"uses":${JSON.stringify(St(a))}${a.slash?`,"slash":${JSON.stringify(a.slash)}`:""}}`}catch(d){throw d.path="data"+d.path,new Error(Et(e,d))}},get_data(){return{data:`{"type":"data","nodes":[${i.join(",")}]}
`,chunks:n>1?s.iterate():null}}}}async function Ve({event:e,event_state:t,state:r,node:n,parent:s}){if(!n?.server)return null;let o=!0;const i={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},l=n.server.load,a=n.server.trailingSlash;if(!l)return{type:"data",data:null,uses:i,slash:a};const d=Zt(e.url,()=>{o&&(i.url=!0)},f=>{o&&i.search_params.add(f)});return r.prerendering&&mt(d),{type:"data",data:await ee({name:"sveltekit.load",attributes:{"sveltekit.load.node_id":n.server_id||"unknown","sveltekit.load.node_type":Rt(n.server_id),"http.route":e.route.id||"unknown"},fn:async f=>{const _=ce(e,f);return await U({event:_,state:t},()=>l.call(null,{..._,fetch:(u,p)=>(new URL(u instanceof Request?u.url:u,e.url),e.fetch(u,p)),depends:(...u)=>{for(const p of u){const{href:m}=new URL(p,e.url);i.dependencies.add(m)}},params:new Proxy(e.params,{get:(u,p)=>(o&&i.params.add(p),u[p])}),parent:async()=>(o&&(i.parent=!0),s()),route:new Proxy(e.route,{get:(u,p)=>(o&&(i.route=!0),u[p])}),url:d,untrack(u){o=!1;try{return u()}finally{o=!0}}}))}})??null,uses:i,slash:a}}async function Ut({event:e,event_state:t,fetched:r,node:n,parent:s,server_data_promise:o,state:i,resolve_opts:l,csr:a}){const d=await o,c=n?.universal?.load;return c?await ee({name:"sveltekit.load",attributes:{"sveltekit.load.node_id":n.universal_id||"unknown","sveltekit.load.node_type":Rt(n.universal_id),"http.route":e.route.id||"unknown"},fn:async _=>{const h=ce(e,_);return await U({event:h,state:t},()=>c.call(null,{url:e.url,params:e.params,data:d?.data??null,route:e.route,fetch:Nr(e,i,r,a,l),setHeaders:e.setHeaders,depends:()=>{},parent:s,untrack:u=>u(),tracing:h.tracing}))}})??null:d?.data??null}function Nr(e,t,r,n,s){const o=async(i,l)=>{const a=i instanceof Request&&i.body?i.clone().body:null,d=i instanceof Request&&[...i.headers].length?new Headers(i.headers):l?.headers;let c=await e.fetch(i,l);const f=new URL(i instanceof Request?i.url:i,e.url),_=f.origin===e.url.origin;let h;if(_)t.prerendering&&(h={response:c,body:null},t.prerendering.dependencies.set(f.pathname,h));else if(f.protocol==="https:"||f.protocol==="http:")if((i instanceof Request?i.mode:l?.mode??"cors")==="no-cors")c=new Response("",{status:c.status,statusText:c.statusText,headers:c.headers});else{const g=c.headers.get("access-control-allow-origin");if(!g||g!==e.url.origin&&g!=="*")throw new Error(`CORS error: ${g?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}let u;const p=new Proxy(c,{get(m,g,k){async function E(y,b){const w=Number(m.status);if(isNaN(w))throw new Error(`response.status is not a number. value: "${m.status}" type: ${typeof m.status}`);r.push({url:_?f.href.slice(e.url.origin.length):f.href,method:e.request.method,request_body:i instanceof Request&&a?await zr(a):l?.body,request_headers:d,response_body:y,response:m,is_b64:b})}if(g==="body"){if(m.body===null)return null;if(u)return u;const[y,b]=m.body.tee();return(async()=>{let w=new Uint8Array;for await(const v of y){const x=new Uint8Array(w.length+v.length);x.set(w,0),x.set(v,w.length),w=x}h&&(h.body=new Uint8Array(w)),E(Qe(w),!0)})(),u=b}if(g==="arrayBuffer")return async()=>{const y=await m.arrayBuffer(),b=new Uint8Array(y);return h&&(h.body=b),y instanceof ArrayBuffer&&await E(Qe(b),!0),y};async function $(){const y=await m.text();if(y===""&&fr.includes(m.status)){await E(void 0,!1);return}return(!y||typeof y=="string")&&await E(y,!1),h&&(h.body=y),y}if(g==="text")return $;if(g==="json")return async()=>{const y=await $();return y?JSON.parse(y):void 0};const R=Reflect.get(m,g,m);return R instanceof Function?Object.defineProperties(function(){return Reflect.apply(R,this===k?m:this,arguments)},{name:{value:R.name},length:{value:R.length}}):R}});if(n){const m=c.headers.get;c.headers.get=g=>{const k=g.toLowerCase(),E=m.call(c.headers,k);if(E&&!k.startsWith("x-sveltekit-")&&!s.filterSerializedResponseHeaders(k,E))throw new Error(`Failed to get response header "${k}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${e.route.id})`);return E}}return p};return(i,l)=>{const a=o(i,l);return a.catch(()=>{}),a}}async function zr(e){let t="";const r=e.getReader();for(;;){const{done:n,value:s}=await r.read();if(n)break;t+=ar.decode(s)}return t}function Ht(...e){let t=5381;for(const r of e)if(typeof r=="string"){let n=r.length;for(;n;)t=t*33^r.charCodeAt(--n)}else if(ArrayBuffer.isView(r)){const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let s=n.length;for(;s;)t=t*33^n[--s]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const Lt={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},Ur=new RegExp(`[${Object.keys(Lt).join("")}]`,"g");function Hr(e,t,r=!1){const n={};let s=null,o=null,i=!1;for(const[c,f]of e.response.headers)t(c,f)&&(n[c]=f),c==="cache-control"?s=f:c==="age"?o=f:c==="vary"&&f.trim()==="*"&&(i=!0);const l={status:e.response.status,statusText:e.response.statusText,headers:n,body:e.response_body},a=JSON.stringify(l).replace(Ur,c=>Lt[c]),d=['type="application/json"',"data-sveltekit-fetched",`data-url="${Ie(e.url,!0)}"`];if(e.is_b64&&d.push("data-b64"),e.request_headers||e.request_body){const c=[];e.request_headers&&c.push([...new Headers(e.request_headers)].join(",")),e.request_body&&c.push(e.request_body),d.push(`data-hash="${Ht(...c)}"`)}if(!r&&e.method==="GET"&&s&&!i){const c=/s-maxage=(\d+)/g.exec(s)??/max-age=(\d+)/g.exec(s);if(c){const f=+c[1]-+(o??"0");d.push(`data-ttl="${f}"`)}}return`<script ${d.join(" ")}>${a}<\/script>`}const H=JSON.stringify;function rt(e){qe[0]||Lr();const t=It.slice(0),r=Ir(e);for(let s=0;s<r.length;s+=16){const o=r.subarray(s,s+16);let i,l,a,d=t[0],c=t[1],f=t[2],_=t[3],h=t[4],u=t[5],p=t[6],m=t[7];for(let g=0;g<64;g++)g<16?i=o[g]:(l=o[g+1&15],a=o[g+14&15],i=o[g&15]=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+o[g&15]+o[g+9&15]|0),i=i+m+(h>>>6^h>>>11^h>>>25^h<<26^h<<21^h<<7)+(p^h&(u^p))+qe[g],m=p,p=u,u=h,h=_+i|0,_=f,f=c,c=d,d=i+(c&f^_&(c^f))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;t[0]=t[0]+d|0,t[1]=t[1]+c|0,t[2]=t[2]+f|0,t[3]=t[3]+_|0,t[4]=t[4]+h|0,t[5]=t[5]+u|0,t[6]=t[6]+p|0,t[7]=t[7]+m|0}const n=new Uint8Array(t.buffer);return Dt(n),btoa(String.fromCharCode(...n))}const It=new Uint32Array(8),qe=new Uint32Array(64);function Lr(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let n=!0;for(let s=2;s*s<=t;s++)if(t%s===0){n=!1;break}n&&(r<8&&(It[r]=e(t**(1/2))),qe[r]=e(t**(1/3)),r++)}}function Dt(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=s,e[t+2]=n,e[t+3]=r}}function Ir(e){const t=he.encode(e),r=t.length*8,n=512*Math.ceil((r+65)/512),s=new Uint8Array(n/8);s.set(t),s[t.length]=128,Dt(s);const o=new Uint32Array(s.buffer);return o[o.length-2]=Math.floor(r/4294967296),o[o.length-1]=r,o}const nt=new Uint8Array(16);function Dr(){return crypto.getRandomValues(nt),btoa(String.fromCharCode(...nt))}const Mr=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),Wr=/^(nonce|sha\d\d\d)-/;class Mt{#e;#t;#c;#l;#u;#d;#f;#p;#n;#s;#a;#o;#i;#r;#h;constructor(t,r,n){this.#e=t,this.#n=r;const s=this.#n;this.#s=[],this.#a=[],this.#o=[],this.#i=[],this.#r=[];const o=s["script-src"]||s["default-src"],i=s["script-src-elem"],l=s["style-src"]||s["default-src"],a=s["style-src-attr"],d=s["style-src-elem"],c=f=>!!f&&!f.some(_=>_==="unsafe-inline");this.#c=c(o),this.#l=c(i),this.#d=c(l),this.#f=c(a),this.#p=c(d),this.#t=this.#c||this.#l,this.#u=this.#d||this.#f||this.#p,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#u&&!this.#e,this.#h=n}add_script(t){if(!this.#t)return;const r=this.#e?`sha256-${rt(t)}`:`nonce-${this.#h}`;this.#c&&this.#s.push(r),this.#l&&this.#a.push(r)}add_style(t){if(!this.#u)return;const r=this.#e?`sha256-${rt(t)}`:`nonce-${this.#h}`;if(this.#d&&this.#o.push(r),this.#f&&this.#i.push(r),this.#p){const n="sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",s=this.#n;s["style-src-elem"]&&!s["style-src-elem"].includes(n)&&!this.#r.includes(n)&&this.#r.push(n),r!==n&&this.#r.push(r)}}get_header(t=!1){const r=[],n={...this.#n};this.#o.length>0&&(n["style-src"]=[...n["style-src"]||n["default-src"]||[],...this.#o]),this.#i.length>0&&(n["style-src-attr"]=[...n["style-src-attr"]||[],...this.#i]),this.#r.length>0&&(n["style-src-elem"]=[...n["style-src-elem"]||[],...this.#r]),this.#s.length>0&&(n["script-src"]=[...n["script-src"]||n["default-src"]||[],...this.#s]),this.#a.length>0&&(n["script-src-elem"]=[...n["script-src-elem"]||[],...this.#a]);for(const s in n){if(t&&(s==="frame-ancestors"||s==="report-uri"||s==="sandbox"))continue;const o=n[s];if(!o)continue;const i=[s];Array.isArray(o)&&o.forEach(l=>{Mr.has(l)||Wr.test(l)?i.push(`'${l}'`):i.push(l)}),r.push(i.join(" "))}return r.join("; ")}}class Fr extends Mt{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content="${Ie(t,!0)}">`}}class Vr extends Mt{constructor(t,r,n){if(super(t,r,n),Object.values(r).filter(s=>!!s).length>0){const s=r["report-to"]?.length??!1,o=r["report-uri"]?.length??!1;if(!s&&!o)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Br{nonce=Dr();csp_provider;report_only_provider;constructor({mode:t,directives:r,reportOnly:n},{prerender:s}){const o=t==="hash"||t==="auto"&&s;this.csp_provider=new Fr(o,r,this.nonce),this.report_only_provider=new Vr(o,n,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function Wt(e,t,r){const n={},s=e.slice(1),o=s.filter(l=>l!==void 0);let i=0;for(let l=0;l<t.length;l+=1){const a=t[l];let d=s[l-i];if(a.chained&&a.rest&&i&&(d=s.slice(l-i,l+1).filter(c=>c).join("/"),i=0),d===void 0){a.rest&&(n[a.name]="");continue}if(!a.matcher||r[a.matcher](d)){n[a.name]=d;const c=t[l+1],f=s[l+1];c&&!c.rest&&c.optional&&f&&a.chained&&(i=0),!c&&!f&&Object.keys(n).length===o.length&&(i=0);continue}if(a.optional&&a.chained){i++;continue}return}if(!i)return n}function Ft(e,t,r){const{errors:n,layouts:s,leaf:o}=e,i=[...n,...s.map(l=>l?.[1]),o[1]].filter(l=>typeof l=="number").map(l=>`'${l}': () => ${Vt(r._.client.nodes?.[l],t)}`).join(`,
		`);return[`{
	id: ${H(e.id)}`,`errors: ${H(e.errors)}`,`layouts: ${H(e.layouts)}`,`leaf: ${H(e.leaf)}`,`nodes: {
		${i}
	}
}`].join(`,
	`)}function Vt(e,t){if(!e)return"Promise.resolve({})";if(e[0]==="/")return`import('${e}')`;if(J!=="")return`import('${J}/${e}')`;let r=or(t.pathname,`${z}/${e}`);return r[0]!=="."&&(r=`./${r}`),`import('${r}')`}async function Gr(e,t,r){if(!r._.client.routes)return N("Server-side route resolution disabled",{status:400});let n=null,s={};const o=await r._.matchers();for(const i of r._.client.routes){const l=i.pattern.exec(e);if(!l)continue;const a=Wt(l,i.params,o);if(a){n=i,s=yt(a);break}}return Bt(n,s,t,r).response}function Bt(e,t,r,n){const s=new Headers({"content-type":"application/javascript; charset=utf-8"});if(e){const o=Ft(e,r,n),i=`${Jr(e,r,n)}
export const route = ${o}; export const params = ${JSON.stringify(t)};`;return{response:N(i,{headers:s}),body:i}}else return{response:N("",{headers:s}),body:""}}function Jr(e,t,r){const{errors:n,layouts:s,leaf:o}=e;let i="";for(const l of[...n,...s.map(a=>a?.[1]),o[1]]){if(typeof l!="number")continue;const a=r._.client.css?.[l];for(const d of a??[])i+=`'${J||z}/${d}',`}return i?`${Vt(r._.client.start,t)}.then(x => x.load_css([${i}]));`:""}const Xr={...Jt(!1),check:()=>!1};async function pe({branch:e,fetched:t,options:r,manifest:n,state:s,page_config:o,status:i,error:l=null,event:a,event_state:d,resolve_opts:c,action_result:f,data_serializer:_}){if(s.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:h}=n._,u=new Set(h.imports),p=new Set(h.stylesheets),m=new Set(h.fonts),g=new Set,k=new Set,E=new Map;let $;const R=f?.type==="success"||f?.type==="failure"?f.data??null:null;let y=z,b=J,w=H(z);if(s.prerendering?.fallback?r.hash_routing&&(w="new URL('.', location).pathname.slice(0, -1)"):(y=a.url.pathname.slice(z.length).split("/").slice(2).map(()=>"..").join("/")||".",w=`new URL(${H(y)}, location).pathname.slice(0, -1)`,(!J||J[0]==="/"&&J!==hr)&&(b=y)),o.ssr){const j={stores:{page:Ge(null),navigating:Ge(null),updated:Xr},constructors:await Promise.all(e.map(({node:C})=>{if(!C.component)throw new Error(`Missing +page.svelte component for route ${a.route.id}`);return C.component()})),form:R};let T={};for(let C=0;C<e.length;C+=1)T={...T,...e[C].data},j[`data_${C}`]=T;j.page={error:l,params:a.params,route:a.route,status:i,url:a.url,data:T,form:R,state:{}};const V={context:new Map([["__request__",{page:j.page}]])},ne=globalThis.fetch;try{$=await U({event:a,state:d},async()=>{Xt&&Kt({base:y,assets:b});const C=r.root.render(j,V),M=r.async&&"then"in C?C.then(A=>A):C;r.async&&Je();const{head:Q,html:_e,css:me}=r.async?await M:M;return{head:Q,html:_e,css:me}})}finally{Je()}for(const{node:C}of e){for(const M of C.imports)u.add(M);for(const M of C.stylesheets)p.add(M);for(const M of C.fonts)m.add(M);C.inline_styles&&!h.inline&&Object.entries(await C.inline_styles()).forEach(([M,Q])=>E.set(M,Q))}}else $={head:"",html:"",css:{code:"",map:null}};let v="",x=$.html;const S=new Br(r.csp,{prerender:!!s.prerendering}),O=j=>j.startsWith("/")?z+j:`${b}/${j}`,q=h.inline?h.inline?.style:Array.from(E.values()).join(`
`);if(q){const j=[];S.style_needs_nonce&&j.push(` nonce="${S.nonce}"`),S.add_style(q),v+=`
	<style${j.join("")}>${q}</style>`}for(const j of p){const T=O(j),V=['rel="stylesheet"'];E.has(j)?V.push("disabled",'media="(max-width: 0)"'):c.preload({type:"css",path:T})&&g.add(`<${encodeURI(T)}>; rel="preload"; as="style"; nopush`),v+=`
		<link href="${T}" ${V.join(" ")}>`}for(const j of m){const T=O(j);if(c.preload({type:"font",path:T})){const V=j.slice(j.lastIndexOf(".")+1);k.add(`<link rel="preload" as="font" type="font/${V}" href="${T}" crossorigin>`),g.add(`<${encodeURI(T)}>; rel="preload"; as="font"; type="font/${V}"; crossorigin; nopush`)}}const W=xt(r),{data:F,chunks:X}=_.get_data(S);if(o.ssr&&o.csr&&(x+=`
			${t.map(j=>Hr(j,c.filterSerializedResponseHeaders,!!s.prerendering)).join(`
			`)}`),o.csr){const j=n._.client.routes?.find(A=>A.id===a.route.id)??null;if(h.uses_env_dynamic_public&&s.prerendering&&u.add(`${oe}/env.js`),!h.inline){const A=Array.from(u,P=>O(P)).filter(P=>c.preload({type:"js",path:P}));for(const P of A)g.add(`<${encodeURI(P)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?v+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${P}">`:k.add(`<link rel="modulepreload" href="${P}">`)}if(s.prerendering&&k.size>0&&(v+=Array.from(k).map(A=>`
		${A}`).join("")),n._.client.routes&&s.prerendering&&!s.prerendering.fallback){const A=Ot(a.url.pathname);s.prerendering.dependencies.set(A,Bt(j,a.params,new URL(A,a.url),n))}const T=[],V=h.uses_env_dynamic_public&&s.prerendering,ne=[`base: ${w}`];if(J&&ne.push(`assets: ${H(J)}`),h.uses_env_dynamic_public&&ne.push(`env: ${V?"null":H(Ae)}`),X){T.push("const deferred = new Map();"),ne.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`);let A="";Object.keys(r.hooks.transport).length>0&&(h.inline?A=`const app = __sveltekit_${r.version_hash}.app.app;`:h.app?A=`const app = await import(${H(O(h.app))});`:A=`const { app } = await import(${H(O(h.start))});`);const P=A?`${A}
							const [data, error] = fn(app);`:"const [data, error] = fn();";ne.push(`resolve: async (id, fn) => {
							${P}

							const try_to_resolve = () => {
								if (!deferred.has(id)) {
									setTimeout(try_to_resolve, 0);
									return;
								}
								const { fulfil, reject } = deferred.get(id);
								deferred.delete(id);
								if (error) reject(error);
								else fulfil(data);
							}
							try_to_resolve();
						}`)}T.push(`${W} = {
						${ne.join(`,
						`)}
					};`);const C=["element"];if(T.push("const element = document.currentScript.parentElement;"),o.ssr){const A={form:"null",error:"null"};R&&(A.form=Pr(R,a.route.id,r.hooks.transport)),l&&(A.error=L.uneval(l));const P=[`node_ids: [${e.map(({node:Y})=>Y.index).join(", ")}]`,`data: ${F}`,`form: ${A.form}`,`error: ${A.error}`];if(i!==200&&P.push(`status: ${i}`),n._.client.routes){if(j){const Y=Ft(j,a.url,n).replaceAll(`
`,`
							`);P.push(`params: ${L.uneval(a.params)}`,`server_route: ${Y}`)}}else r.embedded&&P.push(`params: ${L.uneval(a.params)}`,`route: ${H(a.route)}`);const Z="	".repeat(V?7:6);C.push(`{
${Z}	${P.join(`,
${Z}	`)}
${Z}}`)}const{remote_data:M}=d;let Q="";if(M){const A={};for(const[Z,Y]of M)if(Z.id)for(const le in Y)A[Qt(Z.id,le)]=await Y[le];const P=Z=>{for(const Y in r.hooks.transport){const le=r.hooks.transport[Y].encode(Z);if(le)return`app.decode('${Y}', ${L.uneval(le,P)})`}};Q=`${W}.data = ${L.uneval(A,P)};

						`}const _e=h.inline?`${h.inline.script}

					${Q}${W}.app.start(${C.join(", ")});`:h.app?`Promise.all([
						import(${H(O(h.start))}),
						import(${H(O(h.app))})
					]).then(([kit, app]) => {
						${Q}kit.start(app, ${C.join(", ")});
					});`:`import(${H(O(h.start))}).then((app) => {
						${Q}app.start(${C.join(", ")})
					});`;if(V?T.push(`import(${H(`${y}/${oe}/env.js`)}).then(({ env }) => {
						${W}.env = env;

						${_e.replace(/\n/g,`
	`)}
					});`):T.push(_e),r.service_worker){let A="";if(r.service_worker_options!=null){const P={...r.service_worker_options};A=`, ${H(P)}`}T.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${O("service-worker.js")}'${A});
						});
					}`)}const me=`
				{
					${T.join(`

					`)}
				}
			`;S.add_script(me),x+=`
			<script${S.script_needs_nonce?` nonce="${S.nonce}"`:""}>${me}<\/script>
		`}const K=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(s.prerendering){const j=[],T=S.csp_provider.get_meta();T&&j.push(T),s.prerendering.cache&&j.push(`<meta http-equiv="cache-control" content="${s.prerendering.cache}">`),j.length>0&&(v=j.join(`
`)+v)}else{const j=S.csp_provider.get_header();j&&K.set("content-security-policy",j);const T=S.report_only_provider.get_header();T&&K.set("content-security-policy-report-only",T),g.size&&K.set("link",Array.from(g).join(", "))}v+=$.head;const $e=r.templates.app({head:v,body:x,assets:b,nonce:S.nonce,env:Ae}),xe=await c.transformPageChunk({html:$e,done:!0})||"";return X||K.set("etag",`"${Ht(xe)}"`),X?new Response(new ReadableStream({async start(j){j.enqueue(he.encode(xe+`
`));for await(const T of X)T.length&&j.enqueue(he.encode(T));j.close()},type:"bytes"}),{headers:K}):N(xe,{status:i,headers:K})}class Be{data;constructor(t){this.data=t}layouts(){return this.data.slice(0,-1)}page(){return this.data.at(-1)}validate(){for(const r of this.layouts())r&&(er(r.server,r.server_id),tr(r.universal,r.universal_id));const t=this.page();t&&(rr(t.server,t.server_id),nr(t.universal,t.universal_id))}#e(t){return this.data.reduce((r,n)=>n?.universal?.[t]??n?.server?.[t]??r,void 0)}csr(){return this.#e("csr")??!0}ssr(){return this.#e("ssr")??!0}prerender(){return this.#e("prerender")??!1}trailing_slash(){return this.#e("trailingSlash")??"never"}get_config(){let t={};for(const r of this.data)!r?.universal?.config&&!r?.server?.config||(t={...t,...r?.universal?.config,...r?.server?.config});return Object.keys(t).length?t:void 0}should_prerender_data(){return this.data.some(t=>t?.server?.load||t?.server?.trailingSlash!==void 0)}}async function Gt({event:e,event_state:t,options:r,manifest:n,state:s,status:o,error:i,resolve_opts:l}){if(e.request.headers.get("x-sveltekit-error"))return we(r,o,i.message);const a=[];try{const d=[],c=await n._.nodes[0](),f=new Be([c]),_=f.ssr(),h=f.csr(),u=fe(e,t,r);if(_){s.error=!0;const p=Ve({event:e,event_state:t,state:s,node:c,parent:async()=>({})}),m=await p;u.add_node(0,m);const g=await Ut({event:e,event_state:t,fetched:a,node:c,parent:async()=>({}),resolve_opts:l,server_data_promise:p,state:s,csr:h});d.push({node:c,server_data:m,data:g},{node:await n._.nodes[1](),data:null,server_data:null})}return await pe({options:r,manifest:n,state:s,page_config:{ssr:_,csr:h},status:o,error:await D(e,t,r,i),branch:d,fetched:a,event:e,event_state:t,resolve_opts:l,data_serializer:u})}catch(d){return d instanceof B?be(d.status,d.location):we(r,ie(d),(await D(e,t,r,d)).message)}}async function Kr(e,t,r,n,s){return ee({name:"sveltekit.remote.call",attributes:{},fn:o=>{const i=ce(e,o);return U({event:i,state:t},()=>Yr(i,t,r,n,s))}})}async function Yr(e,t,r,n,s){const[o,i,l]=s.split("/"),a=n._.remotes;a[o]||Ee(404);const c=(await a[o]()).default[i];c||Ee(404);const f=c.__,_=r.hooks.transport;e.tracing.current.setAttributes({"sveltekit.remote.call.type":f.type,"sveltekit.remote.call.name":f.name});let h;try{if(f.type==="query_batch"){if(e.request.method!=="POST")throw new I(405,"Method Not Allowed",`\`query.batch\` functions must be invoked via POST request, not ${e.request.method}`);const{payloads:g}=await e.request.json(),k=g.map(R=>ye(R,_)),E=await U({event:e,state:t},()=>f.run(k)),$=await Promise.all(k.map(async(R,y)=>{try{return{type:"result",data:E(R,y)}}catch(b){return{type:"error",error:await D(e,t,r,b),status:b instanceof ae||b instanceof I?b.status:500}}}));return G({type:"result",result:ue($,_)})}if(f.type==="form"){if(e.request.method!=="POST")throw new I(405,"Method Not Allowed",`\`form\` functions must be invoked via POST request, not ${e.request.method}`);if(!Le(e.request))throw new I(415,"Unsupported Media Type",`\`form\` functions expect form-encoded data — received ${e.request.headers.get("content-type")}`);const{data:g,meta:k,form_data:E}=await _t(e.request);l&&!("id"in g)&&(g.id=JSON.parse(decodeURIComponent(l)));const $=f.fn,R=await U({event:e,state:t},()=>$(g,k,E));return G({type:"result",result:ue(R,_),refreshes:R.issues?void 0:await u(k.remote_refreshes)})}if(f.type==="command"){const{payload:g,refreshes:k}=await e.request.json(),E=ye(g,_),$=await U({event:e,state:t},()=>c(E));return G({type:"result",result:ue($,_),refreshes:await u(k)})}const p=f.type==="prerender"?l:new URL(e.request.url).searchParams.get("payload"),m=await U({event:e,state:t},()=>c(ye(p,_)));return G({type:"result",result:ue(m,_)})}catch(p){if(p instanceof B)return G({type:"redirect",location:p.location,refreshes:await u(h)});const m=p instanceof ae||p instanceof I?p.status:500;return G({type:"error",error:await D(e,t,r,p),status:m},{status:t.prerendering?m:void 0,headers:{"cache-control":"private, no-store"}})}async function u(p){const m=t.refreshes??{};if(p)for(const g of p){if(m[g]!==void 0)continue;const[k,E,$]=g.split("/"),R=n._.remotes[k],y=(await R?.())?.default?.[E];y||Ee(400,"Bad Request"),m[g]=U({event:e,state:t},()=>y(ye($,_)))}if(Object.keys(m).length!==0)return ue(Object.fromEntries(await Promise.all(Object.entries(m).map(async([g,k])=>[g,await k]))),_)}}async function Qr(e,t,r,n){return ee({name:"sveltekit.remote.form.post",attributes:{},fn:s=>{const o=ce(e,s);return U({event:o,state:t},()=>Zr(o,t,r,n))}})}async function Zr(e,t,r,n){const[s,o,i]=n.split("/");let d=(await r._.remotes[s]?.())?.default[o];if(!d)return e.setHeaders({allow:"GET"}),{type:"error",error:new I(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};i&&(d=U({event:e,state:t},()=>d.for(JSON.parse(i))));try{const c=d.__.fn,{data:f,meta:_,form_data:h}=await _t(e.request);return i&&!("id"in f)&&(f.id=JSON.parse(decodeURIComponent(i))),await U({event:e,state:t},()=>c(f,_,h)),{type:"success",status:200}}catch(c){const f=c;return f instanceof B?{type:"redirect",status:f.status,location:f.location}:{type:"error",error:Fe(f)}}}function en(e){return e.pathname.startsWith(`${z}/${oe}/remote/`)&&e.pathname.replace(`${z}/${oe}/remote/`,"")}function tn(e){return e.searchParams.get("/remote")}const rn=10;async function nn(e,t,r,n,s,o,i,l){if(o.depth>rn)return N(`Not found: ${e.url.pathname}`,{status:404});if(Tt(e)){const a=await s._.nodes[r.leaf]();return Ar(e,t,n,a?.server)}try{const a=i.page();let d=200,c;if(Cr(e)){const b=tn(e.url);if(b?c=await Qr(e,t,s,b):c=await qr(e,t,a.server),c?.type==="redirect")return be(c.status,c.location);c?.type==="error"&&(d=ie(c.error)),c?.type==="failure"&&(d=c.status)}const f=i.prerender();if(f){if(a.server?.actions)throw new Error("Cannot prerender pages with actions")}else if(o.prerendering)return new Response(void 0,{status:204});o.prerender_default=f;const _=i.should_prerender_data(),h=Me(e.url.pathname),u=[],p=i.ssr(),m=i.csr();if(p===!1&&!(o.prerendering&&_))return re&&c&&e.request.headers.has("x-sveltekit-action"),await pe({branch:[],fetched:u,page_config:{ssr:!1,csr:m},status:d,error:null,event:e,event_state:t,options:n,manifest:s,state:o,resolve_opts:l,data_serializer:fe(e,t,n)});const g=[];let k=null;const E=fe(e,t,n),$=o.prerendering&&_?zt(e,t,n):null,R=i.data.map((b,w)=>{if(k)throw k;return Promise.resolve().then(async()=>{try{if(b===a&&c?.type==="error")throw c.error;const v=await Ve({event:e,event_state:t,state:o,node:b,parent:async()=>{const x={};for(let S=0;S<w;S+=1){const O=await R[S];O&&Object.assign(x,O.data)}return x}});return b&&E.add_node(w,v),$?.add_node(w,v),v}catch(v){throw k=v,k}})}),y=i.data.map((b,w)=>{if(k)throw k;return Promise.resolve().then(async()=>{try{return await Ut({event:e,event_state:t,fetched:u,node:b,parent:async()=>{const v={};for(let x=0;x<w;x+=1)Object.assign(v,await y[x]);return v},resolve_opts:l,server_data_promise:R[w],state:o,csr:m})}catch(v){throw k=v,k}})});for(const b of R)b.catch(()=>{});for(const b of y)b.catch(()=>{});for(let b=0;b<i.data.length;b+=1){const w=i.data[b];if(w)try{const v=await R[b],x=await y[b];g.push({node:w,server_data:v,data:x})}catch(v){const x=v;if(x instanceof B){if(o.prerendering&&_){const q=JSON.stringify({type:"redirect",location:x.location});o.prerendering.dependencies.set(h,{response:N(q),body:q})}return be(x.status,x.location)}const S=ie(x),O=await D(e,t,n,x);for(;b--;)if(r.errors[b]){const q=r.errors[b],W=await s._.nodes[q]();let F=b;for(;!g[F];)F-=1;E.set_max_nodes(F+1);const X=Ce(g.slice(0,F+1)),K=new Be(X.map($e=>$e.node));return await pe({event:e,event_state:t,options:n,manifest:s,state:o,resolve_opts:l,page_config:{ssr:K.ssr(),csr:K.csr()},status:S,error:O,branch:X.concat({node:W,data:null,server_data:null}),fetched:u,data_serializer:E})}return we(n,S,O.message)}else g.push(null)}if(o.prerendering&&$){let{data:b,chunks:w}=$.get_data();if(w)for await(const v of w)b+=v;o.prerendering.dependencies.set(h,{response:N(b),body:b})}return await pe({event:e,event_state:t,options:n,manifest:s,state:o,resolve_opts:l,page_config:{csr:m,ssr:p},status:d,error:null,branch:p===!1?[]:Ce(g),action_result:c,fetched:u,data_serializer:p===!1?fe(e,t,n):E})}catch(a){return await Gt({event:e,event_state:t,options:n,manifest:s,state:o,status:500,error:a,resolve_opts:l})}}function sn(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}async function an(e,t,r,n,s,o,i,l){if(!r.page)return new Response(void 0,{status:404});try{const a=[...r.page.layouts,r.page.leaf],d=i??a.map(()=>!0);let c=!1;const f=new URL(e.url);f.pathname=Ue(f.pathname,l);const _={...e,url:f},h=a.map(($,R)=>sn(async()=>{try{if(c)return{type:"skip"};const y=$==null?$:await s._.nodes[$]();return Ve({event:_,event_state:t,state:o,node:y,parent:async()=>{const b={};for(let w=0;w<R;w+=1){const v=await h[w]();v&&Object.assign(b,v.data)}return b}})}catch(y){throw c=!0,y}})),u=h.map(async($,R)=>d[R]?$():{type:"skip"});let p=u.length;const m=await Promise.all(u.map(($,R)=>$.catch(async y=>{if(y instanceof B)throw y;return p=Math.min(p,R+1),{type:"error",error:await D(e,t,n,y),status:y instanceof ae||y instanceof I?y.status:void 0}}))),g=zt(e,t,n);for(let $=0;$<m.length;$++)g.add_node($,m[$]);const{data:k,chunks:E}=g.get_data();return E?new Response(new ReadableStream({async start($){$.enqueue(he.encode(k));for await(const R of E)$.enqueue(he.encode(R));$.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):Pe(k)}catch(a){const d=a;return d instanceof B?Ne(d):Pe(await D(e,t,n,d),500)}}function Pe(e,t=200){return N(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function Ne(e){return Pe({type:"redirect",location:e.location})}var ge={};var st;function on(){if(st)return ge;st=1,ge.parse=r,ge.serialize=n;var e=Object.prototype.toString,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(a,d){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var c={},f=d||{},_=f.decode||s,h=0;h<a.length;){var u=a.indexOf("=",h);if(u===-1)break;var p=a.indexOf(";",h);if(p===-1)p=a.length;else if(p<u){h=a.lastIndexOf(";",u-1)+1;continue}var m=a.slice(h,u).trim();if(c[m]===void 0){var g=a.slice(u+1,p).trim();g.charCodeAt(0)===34&&(g=g.slice(1,-1)),c[m]=l(g,_)}h=p+1}return c}function n(a,d,c){var f=c||{},_=f.encode||o;if(typeof _!="function")throw new TypeError("option encode is invalid");if(!t.test(a))throw new TypeError("argument name is invalid");var h=_(d);if(h&&!t.test(h))throw new TypeError("argument val is invalid");var u=a+"="+h;if(f.maxAge!=null){var p=f.maxAge-0;if(isNaN(p)||!isFinite(p))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(p)}if(f.domain){if(!t.test(f.domain))throw new TypeError("option domain is invalid");u+="; Domain="+f.domain}if(f.path){if(!t.test(f.path))throw new TypeError("option path is invalid");u+="; Path="+f.path}if(f.expires){var m=f.expires;if(!i(m)||isNaN(m.valueOf()))throw new TypeError("option expires is invalid");u+="; Expires="+m.toUTCString()}if(f.httpOnly&&(u+="; HttpOnly"),f.secure&&(u+="; Secure"),f.partitioned&&(u+="; Partitioned"),f.priority){var g=typeof f.priority=="string"?f.priority.toLowerCase():f.priority;switch(g){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(f.sameSite){var k=typeof f.sameSite=="string"?f.sameSite.toLowerCase():f.sameSite;switch(k){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u}function s(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function o(a){return encodeURIComponent(a)}function i(a){return e.call(a)==="[object Date]"||a instanceof Date}function l(a,d){try{return d(a)}catch{return a}}return ge}var te=on();const cn=/[\x00-\x1F\x7F()<>@,;:"/[\]?={} \t]/;function Se(e){if(e?.path===void 0)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function ln(e,t,r){return`${e||""}${t}?${encodeURIComponent(r)}`}function un(e,t){const r=e.headers.get("cookie")??"",n=te.parse(r,{decode:_=>_});let s;const o=new Map,i={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},l={get(_,h){const u=Array.from(o.values()).filter(g=>g.name===_&&je(t.hostname,g.options.domain)&&Re(t.pathname,g.options.path)).sort((g,k)=>k.options.path.length-g.options.path.length)[0];return u?u.options.maxAge===0?void 0:u.value:te.parse(r,{decode:h?.decode})[_]},getAll(_){const h=te.parse(r,{decode:_?.decode}),u=new Map;for(const p of o.values())if(je(t.hostname,p.options.domain)&&Re(t.pathname,p.options.path)){const m=u.get(p.name);(!m||p.options.path.length>m.options.path.length)&&u.set(p.name,p)}for(const p of u.values())h[p.name]=p.value;return Object.entries(h).map(([p,m])=>({name:p,value:m}))},set(_,h,u){const p=_.match(cn);p&&console.warn(`The cookie name "${_}" will be invalid in SvelteKit 3.0 as it contains ${p.join(" and ")}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`),Se(u),c(_,h,{...i,...u})},delete(_,h){Se(h),l.set(_,"",{...h,maxAge:0})},serialize(_,h,u){Se(u);let p=u.path;if(!u.domain||u.domain===t.hostname){if(!s)throw new Error("Cannot serialize cookies until after the route is determined");p=Ye(s,p)}return te.serialize(_,h,{...i,...u,path:p})}};function a(_,h){const u={...n};for(const p of o.values()){if(!je(_.hostname,p.options.domain)||!Re(_.pathname,p.options.path))continue;const m=p.options.encode||encodeURIComponent;u[p.name]=m(p.value)}if(h){const p=te.parse(h,{decode:m=>m});for(const m in p)u[m]=p[m]}return Object.entries(u).map(([p,m])=>`${p}=${m}`).join("; ")}const d=[];function c(_,h,u){if(!s){d.push(()=>c(_,h,u));return}let p=u.path;(!u.domain||u.domain===t.hostname)&&(p=Ye(s,p));const m=ln(u.domain,p,_),g={name:_,value:h,options:{...u,path:p}};o.set(m,g)}function f(_){s=Ue(t.pathname,_),d.forEach(h=>h())}return{cookies:l,new_cookies:o,get_cookie_header:a,set_internal:c,set_trailing_slash:f}}function je(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function Re(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function at(e,t){for(const r of t){const{name:n,value:s,options:o}=r;if(e.append("set-cookie",te.serialize(n,s,o)),o.path.endsWith(".html")){const i=Me(o.path);e.append("set-cookie",te.serialize(n,s,{...o,path:i}))}}}var se={exports:{}},ot;function dn(){if(ot)return se.exports;ot=1;var e={decodeValues:!0,map:!1,silent:!1};function t(a){return typeof a!="string"||a in{}}function r(){return Object.create(null)}function n(a){return typeof a=="string"&&!!a.trim()}function s(a,d){var c=a.split(";").filter(n),f=c.shift(),_=o(f),h=_.name,u=_.value;if(d=d?Object.assign({},e,d):e,t(h))return null;try{u=d.decodeValues?decodeURIComponent(u):u}catch(m){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",m)}var p=r();return p.name=h,p.value=u,c.forEach(function(m){var g=m.split("="),k=g.shift().trimLeft().toLowerCase();if(!t(k)){var E=g.join("=");if(k==="expires")p.expires=new Date(E);else if(k==="max-age"){var $=parseInt(E,10);Number.isNaN($)||(p.maxAge=$)}else k==="secure"?p.secure=!0:k==="httponly"?p.httpOnly=!0:k==="samesite"?p.sameSite=E:k==="partitioned"?p.partitioned=!0:k&&(p[k]=E)}}),p}function o(a){var d="",c="",f=a.split("=");return f.length>1?(d=f.shift(),c=f.join("=")):c=a,{name:d,value:c}}function i(a,d){if(d=d?Object.assign({},e,d):e,!a)return d.map?r():[];if(a.headers)if(typeof a.headers.getSetCookie=="function")a=a.headers.getSetCookie();else if(a.headers["set-cookie"])a=a.headers["set-cookie"];else{var c=a.headers[Object.keys(a.headers).find(function(_){return _.toLowerCase()==="set-cookie"})];!c&&a.headers.cookie&&!d.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),a=c}if(Array.isArray(a)||(a=[a]),d.map){var f=r();return a.filter(n).reduce(function(_,h){var u=s(h,d);return u&&!t(u.name)&&(_[u.name]=u),_},f)}else return a.filter(n).map(function(_){return s(_,d)}).filter(Boolean)}function l(a){if(Array.isArray(a))return a;if(typeof a!="string")return[];var d=[],c=0,f,_,h,u,p;function m(){for(;c<a.length&&/\s/.test(a.charAt(c));)c+=1;return c<a.length}function g(){return _=a.charAt(c),_!=="="&&_!==";"&&_!==","}for(;c<a.length;){for(f=c,p=!1;m();)if(_=a.charAt(c),_===","){for(h=c,c+=1,m(),u=c;c<a.length&&g();)c+=1;c<a.length&&a.charAt(c)==="="?(p=!0,c=u,d.push(a.substring(f,h)),f=c):c=h+1}else c+=1;(!p||c>=a.length)&&d.push(a.substring(f,a.length))}return d}return se.exports=i,se.exports.parse=i,se.exports.parseString=s,se.exports.splitCookiesString=l,se.exports}var it=dn();function fn({event:e,options:t,manifest:r,state:n,get_cookie_header:s,set_internal:o}){const i=async(l,a)=>{const d=ct(l,a,e.url);let c=(l instanceof Request?l.mode:a?.mode)??"cors",f=(l instanceof Request?l.credentials:a?.credentials)??"same-origin";return t.hooks.handleFetch({event:e,request:d,fetch:async(_,h)=>{const u=ct(_,h,e.url),p=new URL(u.url);if(u.headers.has("origin")||u.headers.set("origin",e.url.origin),_!==d&&(c=(_ instanceof Request?_.mode:h?.mode)??"cors",f=(_ instanceof Request?_.credentials:h?.credentials)??"same-origin"),(u.method==="GET"||u.method==="HEAD")&&(c==="no-cors"&&p.origin!==e.url.origin||p.origin===e.url.origin)&&u.headers.delete("origin"),p.origin!==e.url.origin){if(`.${p.hostname}`.endsWith(`.${e.url.hostname}`)&&f!=="omit"){const w=s(p,u.headers.get("cookie"));w&&u.headers.set("cookie",w)}return fetch(u)}const m=J||z,g=decodeURIComponent(p.pathname),k=(g.startsWith(m)?g.slice(m.length):g).slice(1),E=`${k}/index.html`,$=r.assets.has(k)||k in r._.server_assets,R=r.assets.has(E)||E in r._.server_assets;if($||R){const w=$?k:E;if(n.read){const v=$?r.mimeTypes[k.slice(k.lastIndexOf("."))]:"text/html";return new Response(n.read(w),{headers:v?{"content-type":v}:{}})}else if(Ze&&w in r._.server_assets){const v=r._.server_assets[w],x=r.mimeTypes[w.slice(w.lastIndexOf("."))];return new Response(Ze(w),{headers:{"Content-Length":""+v,"Content-Type":x}})}return await fetch(u)}if(jt(r,z+g))return await fetch(u);if(f!=="omit"){const w=s(p,u.headers.get("cookie"));w&&u.headers.set("cookie",w);const v=e.request.headers.get("authorization");v&&!u.headers.has("authorization")&&u.headers.set("authorization",v)}u.headers.has("accept")||u.headers.set("accept","*/*"),u.headers.has("accept-language")||u.headers.set("accept-language",e.request.headers.get("accept-language"));const y=await pn(u,t,r,n),b=y.headers.get("set-cookie");if(b)for(const w of it.splitCookiesString(b)){const{name:v,value:x,...S}=it.parseString(w,{decodeValues:!1}),O=S.path??(p.pathname.split("/").slice(0,-1).join("/")||"/");o(v,x,{path:O,encode:q=>q,...S})}return y}})};return(l,a)=>{const d=i(l,a);return d.catch(()=>{}),d}}function ct(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}async function pn(e,t,r,n){if(e.signal){if(e.signal.aborted)throw new DOMException("The operation was aborted.","AbortError");let s=()=>{};const o=new Promise((l,a)=>{const d=()=>{a(new DOMException("The operation was aborted.","AbortError"))};e.signal.addEventListener("abort",d,{once:!0}),s=()=>e.signal.removeEventListener("abort",d)}),i=await Promise.race([ze(e,t,r,{...n,depth:n.depth+1}),o]);return s(),i}else return await ze(e,t,r,{...n,depth:n.depth+1})}let lt,Oe,Te;function hn(e){return lt??=`export const env=${JSON.stringify(Ae)}`,Oe??=`W/${Date.now()}`,Te??=new Headers({"content-type":"application/javascript; charset=utf-8",etag:Oe}),e.headers.get("if-none-match")===Oe?new Response(void 0,{status:304,headers:Te}):new Response(lt,{headers:Te})}const ut=({html:e})=>e,dt=()=>!1,ft=({type:e})=>e==="js"||e==="css",_n=new Set(["GET","HEAD","POST"]),mn=new Set(["GET","HEAD","OPTIONS"]);const ze=wn(yn);async function yn(e,t,r,n){const s=new URL(e.url),o=jr(s.pathname),i=Er(s.pathname),l=en(s);{const y=e.headers.get("origin");if(l){if(e.method!=="GET"&&y!==s.origin)return G({message:"Cross-site remote requests are forbidden"},{status:403})}else if(t.csrf_check_origin&&Le(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&y!==s.origin&&(!y||!t.csrf_trusted_origins.includes(y))){const w=`Cross-site ${e.method} form submissions are forbidden`,v={status:403};return e.headers.get("accept")==="application/json"?G({message:w},v):N(w,v)}}if(t.hash_routing&&s.pathname!==z+"/"&&s.pathname!=="/[fallback]")return N("Not found",{status:404});let a;o?s.pathname=Rr(s.pathname):i?(s.pathname=Sr(s.pathname)+(s.searchParams.get(Xe)==="1"?"/":"")||"/",s.searchParams.delete(Xe),a=s.searchParams.get(Ke)?.split("").map(y=>y==="1"),s.searchParams.delete(Ke)):l&&(s.pathname=e.headers.get("x-sveltekit-pathname")??z,s.search=e.headers.get("x-sveltekit-search")??"");const d={},{cookies:c,new_cookies:f,get_cookie_header:_,set_internal:h,set_trailing_slash:u}=un(e,s),p={prerendering:n.prerendering,transport:t.hooks.transport,handleValidationError:t.hooks.handleValidationError,tracing:{record_span:ee},is_in_remote_function:!1},m={cookies:c,fetch:null,getClientAddress:n.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-static does not specify getClientAddress. Please raise an issue")}),locals:{},params:{},platform:n.platform,request:e,route:{id:null},setHeaders:y=>{for(const b in y){const w=b.toLowerCase(),v=y[b];if(w==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(w in d)if(w==="server-timing")d[w]+=", "+v;else throw new Error(`"${b}" header is already set`);else d[w]=v,n.prerendering&&w==="cache-control"&&(n.prerendering.cache=v)}},url:s,isDataRequest:i,isSubRequest:n.depth>0,isRemoteRequest:!!l};m.fetch=fn({event:m,options:t,manifest:r,state:n,get_cookie_header:_,set_internal:h}),n.emulator?.platform&&(m.platform=await n.emulator.platform({config:{},prerender:!!n.prerendering?.fallback}));let g=s.pathname;if(!l){const y=n.prerendering?.inside_reroute;try{n.prerendering&&(n.prerendering.inside_reroute=!0),g=await t.hooks.reroute({url:new URL(s),fetch:m.fetch})??s.pathname}catch{return N("Internal Server Error",{status:500})}finally{n.prerendering&&(n.prerendering.inside_reroute=y)}}try{g=sr(g)}catch{return N("Malformed URI",{status:400})}if(g!==s.pathname&&!n.prerendering?.fallback&&jt(r,g)){const y=new URL(e.url);y.pathname=i?Me(g):o?Ot(g):g;const b=await fetch(y,e),w=new Headers(b.headers);return w.has("content-encoding")&&(w.delete("content-encoding"),w.delete("content-length")),new Response(b.body,{headers:w,status:b.status,statusText:b.statusText})}let k=null;if(z&&!n.prerendering?.fallback){if(!g.startsWith(z))return N("Not found",{status:404});g=g.slice(z.length)||"/"}if(o)return Gr(g,new URL(e.url),r);if(g===`/${oe}/env.js`)return hn(e);if(!l&&g.startsWith(`/${oe}`)){const y=new Headers;return y.set("cache-control","public, max-age=0, must-revalidate"),N("Not found",{status:404,headers:y})}if(!n.prerendering?.fallback){const y=await r._.matchers();for(const b of r._.routes){const w=b.pattern.exec(g);if(!w)continue;const v=Wt(w,b.params,y);if(v){k=b,m.route={id:k.id},m.params=yt(v);break}}}let E={transformPageChunk:ut,filterSerializedResponseHeaders:dt,preload:ft},$="never";try{const y=k?.page?new Be(await gn(k.page,r)):void 0;if(k&&!l){if(s.pathname===z||s.pathname===z+"/"?$="always":y?$=y.trailing_slash():k.endpoint&&($=(await k.endpoint()).trailingSlash??"never"),!i){const w=Ue(s.pathname,$);if(w!==s.pathname&&!n.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(w.startsWith("//")?s.origin+w:w)+(s.search==="?"?"":s.search)}})}if(n.before_handle||n.emulator?.platform){let w={},v=!1;if(k.endpoint){const x=await k.endpoint();w=x.config??w,v=x.prerender??v}else y&&(w=y.get_config()??w,v=y.prerender());n.before_handle&&n.before_handle(m,w,v),n.emulator?.platform&&(m.platform=await n.emulator.platform({config:w,prerender:v}))}}u($),n.prerendering&&!n.prerendering.fallback&&!n.prerendering.inside_reroute&&mt(s);const b=await ee({name:"sveltekit.handle.root",attributes:{"http.route":m.route.id||"unknown","http.method":m.request.method,"http.url":m.url.href,"sveltekit.is_data_request":i,"sveltekit.is_sub_request":m.isSubRequest},fn:async w=>{const v={...m,tracing:{enabled:!1,root:w,current:w}};return await U({event:v,state:p},()=>t.hooks.handle({event:v,resolve:(x,S)=>ee({name:"sveltekit.resolve",attributes:{"http.route":x.route.id||"unknown"},fn:O=>U(null,()=>R(ce(x,O),y,S).then(q=>{for(const W in d){const F=d[W];q.headers.set(W,F)}return at(q.headers,f.values()),n.prerendering&&x.route.id!==null&&q.headers.set("x-sveltekit-routeid",encodeURI(x.route.id)),O.setAttributes({"http.response.status_code":q.status,"http.response.body.size":q.headers.get("content-length")||"unknown"}),q}))})}))}});if(b.status===200&&b.headers.has("etag")){let w=e.headers.get("if-none-match");w?.startsWith('W/"')&&(w=w.substring(2));const v=b.headers.get("etag");if(w===v){const x=new Headers({etag:v});for(const S of["cache-control","content-location","date","expires","vary","set-cookie"]){const O=b.headers.get(S);O&&x.set(S,O)}return new Response(void 0,{status:304,headers:x})}}if(i&&b.status>=300&&b.status<=308){const w=b.headers.get("location");if(w)return Ne(new B(b.status,w))}return b}catch(y){if(y instanceof B){const b=i||l?Ne(y):k?.page&&Tt(m)?At(y):be(y.status,y.location);return at(b.headers,f.values()),b}return await et(m,p,t,y)}async function R(y,b,w){try{if(w&&(E={transformPageChunk:w.transformPageChunk||ut,filterSerializedResponseHeaders:w.filterSerializedResponseHeaders||dt,preload:w.preload||ft}),t.hash_routing||n.prerendering?.fallback)return await pe({event:y,event_state:p,options:t,manifest:r,state:n,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:E,data_serializer:fe(y,p,t)});if(l)return await Kr(y,p,t,r,l);if(k){const x=y.request.method;let S;if(i)S=await an(y,p,k,t,r,n,a,$);else if(k.endpoint&&(!k.page||xr(y)))S=await $r(y,p,await k.endpoint(),n);else if(k.page)if(b)if(_n.has(x))S=await nn(y,p,k.page,t,r,n,b,E);else{const O=new Set(mn);if((await r._.nodes[k.page.leaf]())?.server?.actions&&O.add("POST"),x==="OPTIONS")S=new Response(null,{status:204,headers:{allow:Array.from(O.values()).join(", ")}});else{const W=[...O].reduce((F,X)=>(F[X]=!0,F),{});S=$t(W,x)}}else throw new Error("page_nodes not found. This should never happen");else throw new Error("Route is neither page nor endpoint. This should never happen");if(e.method==="GET"&&k.page&&k.endpoint){const O=S.headers.get("vary")?.split(",")?.map(q=>q.trim().toLowerCase());O?.includes("accept")||O?.includes("*")||(S=new Response(S.body,{status:S.status,statusText:S.statusText,headers:new Headers(S.headers)}),S.headers.append("Vary","Accept"))}return S}if(n.error&&y.isSubRequest){const x=new Headers(e.headers);return x.set("x-sveltekit-error","true"),await fetch(e,{headers:x})}if(n.error)return N("Internal Server Error",{status:500});if(n.depth===0)return re&&y.url.pathname,await Gt({event:y,event_state:p,options:t,manifest:r,state:n,status:404,error:new I(404,"Not Found",`Not found: ${y.url.pathname}`),resolve_opts:E});if(n.prerendering)return N("not found",{status:404});const v=await fetch(e);return new Response(v.body,v)}catch(v){return await et(y,p,t,v)}finally{y.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},y.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}function gn(e,t){return Promise.all([...e.layouts.map(r=>r==null?r:t._.nodes[r]()),t._.nodes[e.leaf]()])}function wn(e){return async(t,...r)=>e(t,...r)}function pt(e,t,r){return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)&&(r===""||!n.startsWith(r))))}let bn,ht=null;class qn{#e;#t;constructor(t){if(this.#e=ir,this.#t=t,pr){const r=this.respond.bind(this);this.respond=async(...n)=>{const{promise:s,resolve:o}=gt(),i=ht;return ht=s,await i,r(...n).finally(o)}}}async init({env:t,read:r}){const{env_public_prefix:n,env_private_prefix:s}=this.#e;cr(pt(t,s,n)),lr(pt(t,n,s)),r&&dr(i=>{const l=r(i);return l instanceof ReadableStream?l:new ReadableStream({async start(a){try{const d=await Promise.resolve(l);if(!d){a.close();return}const c=d.getReader();for(;;){const{done:f,value:_}=await c.read();if(f)break;a.enqueue(_)}a.close()}catch(d){a.error(d)}}})}),await(bn??=(async()=>{try{const o=await ur();this.#e.hooks={handle:o.handle||(({event:i,resolve:l})=>l(i)),handleError:o.handleError||(({status:i,error:l,event:a})=>{const d=vr(i,l,a);console.error(d)}),handleFetch:o.handleFetch||(({request:i,fetch:l})=>l(i)),handleValidationError:o.handleValidationError||(({issues:i})=>(console.error("Remote function schema validation failed:",i),{message:"Bad Request"})),reroute:o.reroute||(()=>{}),transport:o.transport||{}},o.transport&&Object.fromEntries(Object.entries(o.transport).map(([i,l])=>[i,l.decode])),o.init&&await o.init()}catch(o){throw o}})())}async respond(t,r){return ze(t,this.#e,this.#t,{...r,error:!1,depth:0})}}export{qn as Server};
