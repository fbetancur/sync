import"clsx";import"../../../../chunks/app-config.js";function m(p,d){p.component(o=>{let n=[];(()=>{const e={totalCreditos:n.length,creditosActivos:n.filter(t=>t.estado==="ACTIVO").length,creditosVencidos:n.filter(t=>t.estado==="VENCIDO").length,montoTotal:n.reduce((t,s)=>t+(s.total_a_pagar||0),0),saldoPendiente:n.reduce((t,s)=>t+(s.saldo_pendiente||0),0),cuotasVencidas:0,proximosVencimientos:0},i=new Date,a=new Date(i);return a.setDate(a.getDate()+1),n.forEach(t=>{r(t).forEach(c=>{const l=new Date(c.fecha_programada);c.estado!=="PAGADA"&&(l<i?e.cuotasVencidas++:l<=a&&e.proximosVencimientos++)})}),e})();function r(e){const i=[];let a=new Date(e.fecha_primera_cuota+"T12:00:00");for(let t=1;t<=e.numero_cuotas;t++){const s=t<=e.cuotas_pagadas,c=a.toISOString().split("T")[0],l=new Date().toISOString().split("T")[0],u=!s&&c<l?Math.floor((new Date(l)-new Date(c))/(1e3*60*60*24)):0;switch(i.push({numero:t,fecha_programada:c,monto_programado:e.valor_cuota,monto_pagado:s?e.valor_cuota:0,estado:s?"PAGADA":"PENDIENTE",dias_atraso:u}),e.frecuencia){case"DIARIO":a.setDate(a.getDate()+1),e.excluir_domingos&&a.getDay()===0&&a.setDate(a.getDate()+1);break;case"SEMANAL":a.setDate(a.getDate()+7);break;case"QUINCENAL":a.setDate(a.getDate()+15);break;case"MENSUAL":a.setMonth(a.getMonth()+1);break}}return i}o.push('<div class="credit-management-page svelte-il4wsa">'),o.push("<!--[-->"),o.push('<div class="loading-container svelte-il4wsa"><div class="spinner svelte-il4wsa"></div> <p class="svelte-il4wsa">Cargando cr√©ditos...</p></div>'),o.push("<!--]--></div> "),o.push("<!--[!-->"),o.push("<!--]-->")})}export{m as default};
